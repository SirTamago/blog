"use strict";function getElement(t,e=document.documentElement){let s=e.querySelector(t);if(s===null){throw new Error("Unknown HTML")}return s}function getParent(t,e=1){while(e--){let e=t.parentElement;if(e===null){throw new Error("Unknown HTML")}t=e}return t}function format(t,...e){return t.replaceAll(/\$\*?[0-9]*/g,(t=>{if(t==="$*"){return""}let s=t.slice(1);if(s>=e.length){return""}return e[s]}))}class dust{constructor(t=50,e=50){this.vx=Math.random()*1+1;this.vy=Math.random()*1+.01;this.shadowBlur=Math.random()*3;this.shadowX=Math.random()*2-1;this.shadowY=Math.random()*2-1;this.radiusX=Math.random()*1.5+.5;this.radiusY=this.radiusX*(Math.random()*(1.3-.3)+.3);this.rotation=Math.PI*Math.floor(Math.random()*2);this.x=t;this.y=e}}class canvasDust{constructor(t){this.color="#fff";this.width=300;this.height=300;this.dustQuantity=50;this.dustArr=[];this.inStop=false;this.build=()=>{this.resize();if(this.ctx){const t=canvasDust.getPoint(this.dustQuantity);for(let e of t){const t=new dust(e[0],e[1]);this.buildDust(t);this.dustArr.push(t)}requestAnimationFrame(this.paint)}};this.paint=()=>{if(this.inStop){return}const t=this.dustArr;for(let e of t){this.ctx.clearRect(e.x-6,e.y-6,12,12);if(e.x<-5||e.y<-5){const t=this.width;const s=Math.floor(Math.random()*window.innerHeight);e.x=t;e.y=s}else{e.x-=e.vx;e.y-=e.vy}}for(let e of t){this.buildDust(e)}requestAnimationFrame(this.paint)};this.buildDust=t=>{const e=this.ctx;e.beginPath();e.shadowBlur=t.shadowBlur;e.shadowOffsetX=t.shadowX;e.shadowOffsetY=t.shadowY;e.ellipse(t.x,t.y,t.radiusX,t.radiusY,t.rotation,0,Math.PI*2);e.closePath();e.fill()};this.resize=()=>{const t=this.canvas;const e=window.innerWidth;const s=window.innerHeight;this.width=e;this.height=s;this.dustQuantity=Math.floor((e+s)/38);t.width=e;t.height=s;this.ctx.shadowColor=this.ctx.fillStyle=this.color};this.stop=()=>{this.inStop=true};this.play=()=>{if(this.inStop===true){this.inStop=false;requestAnimationFrame(this.paint)}};const e=getElement(t);this.canvas=e;this.ctx=this.canvas.getContext("2d");this.build();window.addEventListener("resize",this.resize)}}canvasDust.getPoint=(t=1)=>{let e=[];for(let s=0;s<t;++s){const t=Math.floor(Math.random()*window.innerWidth);const s=Math.floor(Math.random()*window.innerHeight);e.push([t,s])}return e};try{var canvasDusts=new canvasDust("#canvas-dust")}catch(t){}class expands{constructor(){this.reverse=(t,e,s)=>{const i=getParent(t);if(i.classList.contains(e)){i.classList.remove(e);i.classList.add(s)}else{i.classList.remove(s);i.classList.add(e)}};this.addEvent=t=>{t.addEventListener("click",(e=>{if(e.target.tagName!=="BUTTON"&&e.target.tagName!=="A"){this.reverse(t,"open","fold")}}));t.addEventListener("keypress",(e=>{if(e.key==="Enter"){this.reverse(t,"open","fold")}}))};this.setHTML=()=>{document.querySelectorAll(".expand-box").forEach((t=>{this.addEvent(t.children[0])}))}}}let expand=new expands;class Code{constructor(){this.mermaids=[];this.doAsMermaid=t=>{let e=t.querySelector(".mermaid");t.outerHTML='<div class="highlight mermaid">'+e.innerText+"</div>"};this.resetName=t=>{if(t=="plaintext"){return"TEXT"}if(t=="cs"){return"C#"}if(t=="cpp"){return"C++"}return t.toUpperCase()};this.doAsCode=t=>{const e=this.resetName(t.classList[1]),s=getElement(".gutter",t).children[0].childElementCount>>1;t.classList.add(s<16?"open":"fold");t.classList.add("expand-box");t.innerHTML=`<div class="ex-header" tabindex='0'>\n        <i class="i-status"></i>\n        <span class="ex-title">${format(config.code.codeInfo,e,s)}</span>\n      </div>\n      <div class="ex-content">${t.innerHTML}\n        <button class="code-copy" title="${config.code.copy}"></button>\n      </div>`;getElement(".code-copy",t).addEventListener("click",(e=>{const s=e.target;navigator.clipboard.writeText(getElement("code",t).innerText);s.classList.add("copied");setTimeout((()=>{s.classList.remove("copied")}),1200)}))};this.paintMermaid=()=>{if(typeof mermaid==="undefined")return;mermaid.initialize(document.documentElement.getAttribute("theme-mode")==="dark"?{theme:"dark"}:{theme:"default"});if(typeof mermaid.run!=="undefined"){mermaid.run({querySelector:".mermaid"})}else{mermaid.init()}};this.findCode=()=>{let t=document.querySelectorAll(".highlight");if(t!==null){t.forEach((t=>{if(t.getAttribute("code-find")===null){try{if(!t.classList.contains("mermaid")&&t.querySelector(".code-header")===null){if(t.querySelector(".mermaid")!==null){this.doAsMermaid(t)}else{this.doAsCode(t)}}}catch(t){return}t.setAttribute("code-find","")}}))}document.querySelectorAll(".mermaid").forEach((t=>{this.mermaids.push(t.outerHTML)}));expand.setHTML()};this.resetMermaid=()=>{if(typeof mermaid==="undefined")return;let t=0;document.querySelectorAll(".mermaid").forEach((e=>{e.outerHTML=this.mermaids[t];++t}));this.paintMermaid()};this.findCode();document.addEventListener("pjax:success",this.findCode);window.addEventListener("hexo-blog-decrypt",this.findCode)}}let code=new Code;class Cursor{constructor(){this.now=new MouseEvent("");this.first=true;this.last=0;this.moveIng=false;this.fadeIng=false;this.nowX=0;this.nowY=0;this.attention=`a,input,button,textarea,\n    .navBtnIcon,\n    #post-content img,\n    .ex-header,\n    .gt-user-inner,\n    .wl-sort>li,\n    #valine .vicon,#valine .vat,\n    .lg-container img,.clickable`;this.set=(t=this.nowX,e=this.nowY)=>{this.outer.transform=`translate(calc(${t.toFixed(2)}px - 50%),\n                  calc(${e.toFixed(2)}px - 50%))`};this.move=t=>{if(this.now!==undefined){let e=this.now.x-this.nowX,s=this.now.y-this.nowY;this.nowX+=e*Math.min(.025*(t-this.last),1);this.nowY+=s*Math.min(.025*(t-this.last),1);this.set();this.last=t;if(Math.abs(e)>.1||Math.abs(s)>.1){window.requestAnimationFrame(this.move)}else{this.set(this.now.x,this.now.y);this.moveIng=false}}};this.reset=t=>{this.outer.top="0";this.outer.left="0";if(!this.moveIng){this.moveIng=true;window.requestAnimationFrame(this.move)}this.now=t;if(this.first){this.first=false;this.nowX=this.now.x;this.nowY=this.now.y;this.set()}};this.Aeffect=t=>{if(this.fadeIng==false){this.fadeIng=true;this.effecter.left=String(t.x)+"px";this.effecter.top=String(t.y)+"px";this.effecter.transition="transform .5s cubic-bezier(0.22, 0.61, 0.21, 1)        ,opacity .5s cubic-bezier(0.22, 0.61, 0.21, 1)";this.effecter.transform="translate(-50%, -50%) scale(1)";this.effecter.opacity="0";setTimeout((()=>{this.fadeIng=false;this.effecter.transition="";this.effecter.transform="translate(-50%, -50%) scale(0)";this.effecter.opacity="1"}),500)}};this.hold=()=>{this.outer.height="24px";this.outer.width="24px";this.outer.background="var(--theme-cursor-bg)"};this.relax=()=>{this.outer.height="36px";this.outer.width="36px";this.outer.background="unset"};this.pushHolder=()=>{document.querySelectorAll(this.attention).forEach((t=>{if(!t.classList.contains("is--active")){t.addEventListener("mouseover",this.hold,{passive:true});t.addEventListener("mouseout",this.relax,{passive:true})}}))};let t=document.createElement("div");t.id="cursor-container";t.innerHTML=`<div id="cursor-outer"></div><div id="cursor-effect"></div>`;document.body.appendChild(t);this.outer=getElement("#cursor-outer",t).style;this.outer.top="-100%";this.effecter=getElement("#cursor-effect",t).style;this.effecter.transform="translate(-50%, -50%) scale(0)";this.effecter.opacity="1";window.addEventListener("mousemove",this.reset,{passive:true});window.addEventListener("click",this.Aeffect,{passive:true});this.pushHolder();const e=new MutationObserver(this.pushHolder);e.observe(document,{childList:true,subtree:true})}}new Cursor;class Index{constructor(){this.lastIndex=-1;this.headerLink=document.querySelectorAll("null");this.tocLink=document.querySelectorAll("null");this.setItem=t=>{t.classList.add("active");let e=getParent(t),s=e.children;for(let t=0,e=s.length;t<e;++t){const e=s.item(t);if(e.classList.contains("toc-child")){e.classList.add("has-active");break}}for(;e.classList[0]!=="toc";e=getParent(e)){if(e.classList[0]==="toc-child"){e.classList.add("has-active")}}};this.reset=t=>{let e=document.querySelectorAll("#toc-div .active");let s=document.querySelectorAll("#toc-div .has-active");e.forEach((e=>{if(!e.contains(t)){e.classList.remove("active")}}));s.forEach((e=>{if(!e.parentElement.contains(t)){e.classList.remove("has-active")}}))};this.check=(t,e)=>t[e+1]>window.innerHeight/3||t[e]>0;this.modifyIndex=()=>{let t=[];this.headerLink.forEach((e=>{t.push(e.getBoundingClientRect().top)}));if(this.lastIndex>=0&&(this.lastIndex<1||!this.check(t,this.lastIndex-1))&&this.check(t,this.lastIndex)){return}for(let e=0;e<this.tocLink.length;++e){const s=this.tocLink.item(e);if(e+1===t.length||this.check(t,e)){this.lastIndex=e;this.setItem(s);this.reset(s);return}}this.lastIndex=0;this.setItem(this.tocLink.item(0));this.reset(this.tocLink.item(0))};this.setHTML=()=>{try{this.headerLink=getElement("#post-content").querySelectorAll("h1,h2,h3,h4,h5,h6");this.tocLink=document.querySelectorAll(".toc-link");if(this.tocLink.length){this.setItem(this.tocLink.item(0))}}catch{}};this.setHTML();document.addEventListener("pjax:success",this.setHTML);window.addEventListener("hexo-blog-decrypt",this.setHTML);getElement("main").addEventListener("scroll",(()=>{if(this.tocLink.length){this.modifyIndex()}}),{passive:true});window.onload=function(){var t=document.getElementsByTagName("img");for(var e=0;e<t.length;e++){var s=t[e];var i=s.src;var n=s.alt;var o='<p><a data-caption="'+n+'"><img src="'+i+'" alt="'+n+'" loading="lazy" class="medium-zoom-image"></a><div class="img-caption">'+n+"</div></p>";var a=document.createElement("div");a.innerHTML=o;var r=a.firstChild;s.parentNode.replaceChild(r,s)}}}}let indexs=new Index;class Header{constructor(){this.header=getElement("header");this.button=getElement(".navBtnIcon");this.closeSearch=false;this.readyRev=true;this.relabel=()=>{let t=this.header.querySelectorAll(".navItem"),e=0,s=t.item(0);t.forEach((t=>{try{let i=t,n=getElement("a",i);if(n!==null){let t=n.href,o=i.getAttribute("matchdata");i.classList.remove("active");if(getParent(n)!=i){return}if(t.length>e&&document.URL.match(t)!==null){e=t.length;s=i}if(o){const t=o.split(",");t.forEach((t=>{if(document.URL.match(t)!==null){s=i;e=Infinity}}))}}}catch(t){}}));if(s!==null){do{if(s.classList.contains("navItem")){s.classList.add("active")}}while(!(s=getParent(s)).classList.contains("navContent"))}};this.inHeader=t=>{let e=this.header.getBoundingClientRect();if(t.clientX<e.x||t.clientY<e.y||t.clientX>e.right||t.clientY>e.bottom){this.close()}};this.open=(t=this.header)=>{t.classList.add("expanded");t.classList.remove("closed");scrolls.slideDown();if(t===this.header){t.classList.add("moving");setTimeout((()=>t.classList.remove("moving")),300)}document.addEventListener("click",this.inHeader)};this.close=(t=this.header)=>{document.removeEventListener("click",this.inHeader);t.classList.add("closed");t.classList.remove("expanded");if(t===this.header){t.classList.add("moving");setTimeout((()=>t.classList.remove("moving")),300);this.closeAll();getElement("nav",t).classList.remove("moved")}};this.reverse=(t=this.header)=>{if(this.closeSearch){this.closeSearch=false;return}if(!this.readyRev){return}this.readyRev=false;if(t.classList.contains("expanded")){this.close(t)}else{this.open(t)}setTimeout((()=>this.readyRev=true),300)};this.closeAll=()=>{this.header.querySelectorAll(".expanded").forEach((t=>t.classList.remove("expanded")))};this.relabel();document.addEventListener("pjax:success",this.relabel);document.addEventListener("pjax:send",(()=>this.close()));this.button.addEventListener("mousedown",(()=>{if(document.querySelector(".search")){this.closeSearch=true}}));this.button.onclick=()=>this.reverse(this.header);document.querySelectorAll(".navItemList").forEach((t=>{t=getParent(t);t.addEventListener("click",(e=>{if(getParent(e.target)===t){this.reverse(t)}}))}))}}var header=new Header;class Scroll{constructor(){this.scrolling=0;this.getingtop=false;this.height=0;this.visible=false;this.touchX=0;this.touchY=2147483647;this.notMoveY=false;this.reallyUp=false;this.intop=false;this.scrolltop=()=>{getElement("main").scroll({top:0,left:0,behavior:"smooth"});this.totop.style.opacity="0";this.getingtop=true;setTimeout((()=>this.totop.style.display="none"),300)};this.totopChange=t=>{if(t<-200){this.totop.style.display="";this.visible=true;setTimeout((()=>{if(this.visible){this.totop.style.opacity="1"}}),300)}else{this.totop.style.opacity="0";this.visible=false;setTimeout((()=>{if(!this.visible){this.totop.style.display="none"}}),300)}};this.slideDown=()=>{if(!this.intop){return}const t=getElement("main").classList;if(!document.querySelector(".expanded")){getElement(".navBtn").classList.add("hide-btn")}t.remove("up");t.add("down");t.add("down");t.add("moving");setTimeout((()=>{t.remove("down");t.remove("moving")}),300);this.intop=false};this.slideUp=()=>{if(this.intop||document.querySelector(".moving")){return}if(!document.querySelector("#search-header")){getElement(".navBtn").classList.remove("hide-btn");return}const t=getElement("main").classList;getElement(".navBtn").classList.remove("hide-btn");t.remove("down");t.add("up");t.add("moving");this.intop=true;setTimeout((()=>getElement("main").classList.remove("moving")),300)};this.setHTML=()=>{try{let t=getElement(".navBtn");let e=()=>{try{let e=getElement("article").getBoundingClientRect().top;if(e>0){return}if(!document.querySelector(".expanded")){if(this.height-e>100){t.classList.add("hide-btn");this.height=e}else if(e>this.height){if(e-this.height>20){t.classList.remove("hide-btn")}this.height=e}}++this.scrolling;setTimeout((()=>{if(! --this.scrolling){this.getingtop=false}}),100);if(!this.getingtop){this.totopChange(e)}}catch(t){}};getElement("main").addEventListener("scroll",e);this.height=0;this.visible=false;this.totop=getElement("#to-top");this.setListener()}catch(t){}};this.checkTouchMove=t=>{if(Math.abs(t.changedTouches[0].screenX-this.touchX)>50&&!this.reallyUp){this.notMoveY=true}if(document.querySelector(".expanded")||window.innerWidth>1024||this.notMoveY||t.changedTouches[0].screenY===this.touchY||document.querySelector(".moving")){return}if(this.intop||getElement("article").getBoundingClientRect().top>=0){this.reallyUp=true;if(t.changedTouches[0].screenY>this.touchY){this.slideUp()}else{this.slideDown()}this.touchY=t.changedTouches[0].screenY}};this.startTouch=t=>{this.touchX=t.changedTouches[0].screenX;this.touchY=t.changedTouches[0].screenY;this.notMoveY=false};this.checkPos=()=>{if(getElement("article").getBoundingClientRect().top<0&&this.intop){this.slideDown()}};this.setListener=()=>{getElement("#post-content").addEventListener("click",this.supScroll);getElement("#footnotes").addEventListener("click",this.footNoteScroll)};this.supScroll=t=>{const e=t.target;const s=getParent(e);if(s?.tagName==="SUP"){t.preventDefault();const s=e.href.split("/").pop()?.slice(1)||"";document.getElementById(s)?.scrollIntoView({behavior:"smooth"});return}};this.footNoteScroll=t=>{const e=t.target;if(e.tagName==="A"){t.preventDefault();const s=e.href.split("/").pop()?.slice(1)||"";document.getElementById(s)?.scrollIntoView({behavior:"smooth"})}};document.addEventListener("pjax:success",this.setHTML);document.addEventListener("touchstart",this.startTouch);document.addEventListener("touchmove",this.checkTouchMove);document.addEventListener("touchend",this.checkPos);document.addEventListener("wheel",(t=>{if(document.querySelector(".expanded")||window.innerWidth>1024){return}if(getElement("article").getBoundingClientRect().top>=0){if(t.deltaY<0){this.slideUp()}else{this.slideDown()}}}));this.setHTML();this.totop=document.querySelector("#to-top")}}var scrolls=new Scroll;class pjaxSupport{constructor(){this.loading=getElement(".loading");this.left=getElement(".loadingBar.left");this.right=getElement(".loadingBar.right");this.timestamp=0;this.start=t=>{this.left.style.transform=`scaleX(${t})`;this.right.style.transform=`scaleX(${t})`;++this.timestamp};this.loaded=()=>{getElement("main").scrollTop=0;this.start(1);setTimeout((t=>{if(this.timestamp===t){this.loading.style.opacity="0"}}),600,this.timestamp)};this.fail=()=>{setTimeout((t=>{if(this.timestamp!==t){return}this.start(0);this.loading.classList.add("fail");setTimeout((t=>{if(this.timestamp===t){this.loading.style.opacity="0";this.loading.classList.remove("fail")}}),600,this.timestamp)}),600,this.timestamp)};document.addEventListener("pjax:send",(()=>{if(getElement("main").classList.contains("up")){scrolls.slideDown()}this.loading.classList.add("reset");this.loading.classList.remove("fail");this.start(0);setTimeout((t=>{if(this.timestamp!==t){return}this.loading.classList.remove("reset");this.start(.3);this.loading.style.opacity="1";setTimeout((t=>{if(this.timestamp===t){this.start(.6)}}),1200,this.timestamp)}),0,this.timestamp)}));document.addEventListener("pjax:start",this.loaded);document.addEventListener("pjax:error",this.fail)}}try{new pjaxSupport}catch(t){}class ColorMode{constructor(){this.html=document.documentElement;this.dark=this.html.getAttribute("theme-mode")==="dark";this.inChanging=false;this.btn=getElement("#color-mode");this.change=()=>{this.inChanging=true;let t=document.createElement("div");t.style.transition="1.5s";t.innerHTML=`<div style='background: var(--${this.dark?"dark":"light"}-background);\n        height: 100vh; width: 100vw;\n        position: fixed; left: 0; top: 0; z-index: -99999;\n        background-attachment: fixed;\n        background-position: 50% 0;\n        background-repeat: no-repeat;\n        background-size: cover;'></div>`;document.body.insertBefore(t,document.body.firstChild);this.btn.style.pointerEvents="none";setTimeout((()=>{if(canvasDusts)canvasDusts.stop();if(this.dark){this.html.setAttribute("theme-mode","light");this.dark=false;window.localStorage["theme-mode"]="light"}else{this.html.setAttribute("theme-mode","dark");this.dark=true;window.localStorage["theme-mode"]="dark"}t.style.opacity="0";code.resetMermaid()}));setTimeout((()=>{document.body.removeChild(t);if(canvasDusts)canvasDusts.play()}),1500);setTimeout((()=>{this.btn.style.pointerEvents="";this.inChanging=false}),1e3)};document.addEventListener("keypress",(t=>{if(this.inChanging){return}if(t.key==="c"&&t.target&&!["INPUT","TEXTAREA"].includes(t.target.tagName)){this.change()}}))}}try{var colorMode=new ColorMode}catch(t){}class Pair{constructor(t,e){this.comment=t;this.button=e}}class Selectors{constructor(t=[],e=0){this.elements=[];this.changeTo=t=>{if(t===this.nowActive){return}this.nowActive.comment.style.display="none";this.nowActive.button.classList.remove("active");t.comment.style.display="";t.button.classList.add("active");this.nowActive=t};this.elements=t;this.nowActive=this.elements[e];this.elements.forEach((t=>t.comment.style.display="none"));this.nowActive=this.elements[0];for(let t of this.elements){t.button.addEventListener("click",(()=>this.changeTo(t)))}this.nowActive.comment.style.display="";this.nowActive.button.classList.add("active")}}class Comments{constructor(){this.search=["valine","gitalk","waline","artalk"];this.elements=[];this.setHTML=()=>{if(!document.querySelector("#comments .selector"))return;this.elements=[];this.search.forEach((t=>{try{this.elements.push(new Pair(getElement(`#${t}`),getElement(`.${t}-sel`)))}catch(t){}}));new Selectors(this.elements,0)};this.setHTML();document.addEventListener("pjax:complete",this.setHTML)}}new Comments;